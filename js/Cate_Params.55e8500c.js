"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[470],{5761:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});var l=a(311);const o=e=>((0,l.pushScopeId)("data-v-25ced7c2"),e=e(),(0,l.popScopeId)(),e),i=(0,l.createTextVNode)("首页"),r=(0,l.createTextVNode)("商品管理"),s=(0,l.createTextVNode)("商品分类"),d=(0,l.createTextVNode)("添加分类"),n={key:0,style:{color:"lightgreen"}},c=o((()=>(0,l.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-check-circle-fill",viewBox:"0 0 16 16"},[(0,l.createElementVNode)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})],-1))),u=[c],m={key:1,class:"el-icon-circle-close-filled",style:{color:"red"}},h=o((()=>(0,l.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle-fill",viewBox:"0 0 16 16"},[(0,l.createElementVNode)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})],-1))),p=[h],C=(0,l.createTextVNode)("一级"),V=(0,l.createTextVNode)("二级"),g=(0,l.createTextVNode)("三级"),f=(0,l.createTextVNode)("编辑"),w=(0,l.createTextVNode)("删除"),_={class:"dialog-footer"},x=(0,l.createTextVNode)("取 消"),N=(0,l.createTextVNode)("确 定"),b={class:"dialog-footer"},y=(0,l.createTextVNode)("取 消"),v=(0,l.createTextVNode)("确 定");function k(e,t,a,o,c,h){const k=(0,l.resolveComponent)("el-breadcrumb-item"),D=(0,l.resolveComponent)("el-breadcrumb"),$=(0,l.resolveComponent)("el-button"),T=(0,l.resolveComponent)("el-col"),z=(0,l.resolveComponent)("el-row"),B=(0,l.resolveComponent)("vxe-column"),F=(0,l.resolveComponent)("el-tag"),I=(0,l.resolveComponent)("vxe-table"),L=(0,l.resolveComponent)("el-pagination"),E=(0,l.resolveComponent)("el-card"),K=(0,l.resolveComponent)("el-input"),P=(0,l.resolveComponent)("el-form-item"),R=(0,l.resolveComponent)("el-cascader"),U=(0,l.resolveComponent)("el-form"),S=(0,l.resolveComponent)("el-dialog");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[(0,l.createVNode)(D,{"separator-class":"el-icon-arrow-right"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(k,{to:{path:"/home"}},{default:(0,l.withCtx)((()=>[i])),_:1}),(0,l.createVNode)(k,null,{default:(0,l.withCtx)((()=>[r])),_:1}),(0,l.createVNode)(k,null,{default:(0,l.withCtx)((()=>[s])),_:1})])),_:1}),(0,l.createVNode)(E,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(z,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(T,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)($,{type:"primary",onClick:h.showCateDialog},{default:(0,l.withCtx)((()=>[d])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,l.createVNode)(I,{"row-config":{keyField:"id"},"column-config":{resizable:!0},"tree-config":{rowField:"id",parentField:"parentId",accordion:!0},data:c.catList},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(B,{field:"cat_name",title:"分类名称","tree-node":""},{default:(0,l.withCtx)((e=>[(0,l.createElementVNode)("pre",null,(0,l.toDisplayString)(e.row.cat_name),1)])),_:1}),(0,l.createVNode)(B,{field:"size",title:"是否有效"},{default:(0,l.withCtx)((e=>[!1===e.row.cat_deleted?((0,l.openBlock)(),(0,l.createElementBlock)("i",n,u)):((0,l.openBlock)(),(0,l.createElementBlock)("i",m,p))])),_:1}),(0,l.createVNode)(B,{field:"type",title:"排序"},{default:(0,l.withCtx)((e=>[0===e.row.cat_level?((0,l.openBlock)(),(0,l.createBlock)(F,{key:0,size:"mini"},{default:(0,l.withCtx)((()=>[C])),_:1})):1===e.row.cat_level?((0,l.openBlock)(),(0,l.createBlock)(F,{key:1,size:"mini",type:"success"},{default:(0,l.withCtx)((()=>[V])),_:1})):((0,l.openBlock)(),(0,l.createBlock)(F,{key:2,size:"mini",type:"warning"},{default:(0,l.withCtx)((()=>[g])),_:1}))])),_:1}),(0,l.createVNode)(B,{field:"date",title:"操作"},{default:(0,l.withCtx)((e=>[(0,l.createVNode)($,{size:"mini",type:"primary",icon:c.Edit,onClick:t=>h.showeditCateDialog(e.row)},{default:(0,l.withCtx)((()=>[f])),_:2},1032,["icon","onClick"]),(0,l.createVNode)($,{size:"mini",type:"danger",icon:c.Delete,onClick:t=>h.removeCate(e.row.id.replace(/[^0-9]/gi,""))},{default:(0,l.withCtx)((()=>[w])),_:2},1032,["icon","onClick"])])),_:1})])),_:1},8,["data"]),(0,l.createVNode)(L,{currentPage:c.querInfo.pagenum,"onUpdate:currentPage":t[0]||(t[0]=e=>c.querInfo.pagenum=e),"page-size":c.querInfo.pagesize,"onUpdate:page-size":t[1]||(t[1]=e=>c.querInfo.pagesize=e),"page-sizes":[1,2,5,10],small:e.small,disabled:e.disabled,background:e.background,layout:"total, sizes, prev, pager, next, jumper",total:c.total,onSizeChange:h.handleSizeChange,onCurrentChange:h.handleCurrentChange},null,8,["currentPage","page-size","small","disabled","background","total","onSizeChange","onCurrentChange"])])),_:1}),(0,l.createVNode)(S,{modelValue:c.addCateDialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>c.addCateDialogVisible=e),title:"添加分类",width:"50%",onClose:h.addCateDialogClosed},{footer:(0,l.withCtx)((()=>[(0,l.createElementVNode)("span",_,[(0,l.createVNode)($,{onClick:t[4]||(t[4]=e=>c.addCateDialogVisible=!1)},{default:(0,l.withCtx)((()=>[x])),_:1}),(0,l.createVNode)($,{type:"primary",onClick:h.addCate},{default:(0,l.withCtx)((()=>[N])),_:1},8,["onClick"])])])),default:(0,l.withCtx)((()=>[(0,l.createVNode)(U,{ref:"addCateFormRef",model:c.addCateForm,rules:c.addCateRules,"label-width":"120px",size:e.formSize},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(P,{label:"分类名称：",prop:"cat_name"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(K,{modelValue:c.addCateForm.cat_name,"onUpdate:modelValue":t[2]||(t[2]=e=>c.addCateForm.cat_name=e)},null,8,["modelValue"])])),_:1}),(0,l.createVNode)(P,{label:"父级分类："},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(R,{modelValue:c.selectedKeys,"onUpdate:modelValue":t[3]||(t[3]=e=>c.selectedKeys=e),options:c.parentCateList,props:c.cascaderProps,onChange:h.parentCateChanged,clearable:""},null,8,["modelValue","options","props","onChange"])])),_:1})])),_:1},8,["model","rules","size"])])),_:1},8,["modelValue","onClose"]),(0,l.createVNode)(S,{title:"修改分类",modelValue:c.editCateDialogVisbel,"onUpdate:modelValue":t[8]||(t[8]=e=>c.editCateDialogVisbel=e),width:"50%"},{footer:(0,l.withCtx)((()=>[(0,l.createElementVNode)("span",b,[(0,l.createVNode)($,{onClick:t[7]||(t[7]=e=>c.editCateDialogVisbel=!1)},{default:(0,l.withCtx)((()=>[y])),_:1}),(0,l.createVNode)($,{type:"primary",onClick:h.editCateInfo},{default:(0,l.withCtx)((()=>[v])),_:1},8,["onClick"])])])),default:(0,l.withCtx)((()=>[(0,l.createVNode)(U,{model:c.editCate,rules:c.editCateRules,ref:"editCateRef","label-width":"100px"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(P,{label:"分类名称",prop:"cat_name"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(K,{modelValue:c.editCate.cat_name,"onUpdate:modelValue":t[6]||(t[6]=e=>c.editCate.cat_name=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}var D=a(4876),$=a(547),T={data(){return{catList:[],querInfo:{type:3,pagenum:1,pagesize:5},total:0,Edit:D.Z,Delete:$.Z,addCateDialogVisible:!1,editCateDialogVisbel:!1,addCateForm:{cat_name:"",cat_pid:0,cat_level:0},addCateRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},editCate:{},editCateRules:{cat_name:[{required:!0,message:"请输入要修改的信息",trigger:"blur"}]},editCateId:"",parentCateList:[],cascaderProps:{value:"cat_id",label:"cat_name",children:"children",checkStrictly:!0},selectedKeys:[]}},created(){this.getCateList()},methods:{async getCateList(){const{data:e}=await this.$http.get("categories",{params:this.querInfo});if(200!==e.meta.status)return this.$message.error("获取商品分类失败！");this.catList=e.data.result,this.total=e.data.total},handleSizeChange(e){this.querInfo.pagesize=e,this.getCateList()},handleCurrentChange(e){this.querInfo.pagenum=e,this.getCateList()},showCateDialog(){this.getParentCateList(),this.addCateDialogVisible="true"},async getParentCateList(){const{data:e}=await this.$http.get("categories",{params:{type:2}});if(200!==e.meta.status)return this.$message.error("获取父级分类数据失败！");this.parentCateList=e.data},parentCateChanged(){this.selectedKeys.length>0?(this.addCateForm.cat_pid=this.selectedKeys[this.selectedKeys.length-1],this.addCateForm.cat_level=this.selectedKeys.length):(this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0)},addCateDialogClosed(){this.$refs.addCateFormRef.resetFields(),this.selectedKeys=[],this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0},addCate(){this.$refs.addCateFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.post("categories",this.addCateForm);if(201!==t.meta.status)return this.$message.error("添加分类失败！");this.$message.success("添加分类成功！"),this.getCateList(),this.addCateDialogVisible=!1}))},async showeditCateDialog(e){this.editCateId=e.cat_id;const{data:t}=await this.$http.get("categories/"+e.cat_id);this.editCate=t.data,this.editCateDialogVisbel=!0},async editCateInfo(){const{data:e}=await this.$http.put("categories/"+this.editCate.cat_id,{cat_name:this.editCate.cat_name});if(200!==e.meta.status)return this.$message.error("更新分类数据失败!");this.$message.success("更新分类数据成功!"),this.getCateList(),this.editCateDialogVisbel=!1},async removeCate(e){const t=await this.$confirm("此操作将永久删除该文件, 是否继续?","删除分类",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.info("已取消删除操作!");const{data:a}=await this.$http.delete("categories/"+e);if(200!==a.meta.status)return this.$message.error("分类删除失败!");this.$message.success("该分类已经成功删除!"),this.getCateList()}}},z=a(89);const B=(0,z.Z)(T,[["render",k],["__scopeId","data-v-25ced7c2"]]);var F=B},5680:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var l=a(311);const o=e=>((0,l.pushScopeId)("data-v-bcad6264"),e=e(),(0,l.popScopeId)(),e),i=(0,l.createTextVNode)("首页"),r=(0,l.createTextVNode)("商品管理"),s=(0,l.createTextVNode)("参数列表"),d=o((()=>(0,l.createElementVNode)("span",null,"选择商品分类：",-1))),n=(0,l.createTextVNode)("添加参数"),c=(0,l.createTextVNode)(" + New Tag "),u=(0,l.createTextVNode)("编辑"),m=(0,l.createTextVNode)("删除"),h=(0,l.createTextVNode)("添加属性"),p=(0,l.createTextVNode)(" + New Tag "),C=(0,l.createTextVNode)("编辑"),V=(0,l.createTextVNode)("删除"),g={class:"dialog-footer"},f=(0,l.createTextVNode)("取 消"),w=(0,l.createTextVNode)("确 定"),_={class:"dialog-footer"},x=(0,l.createTextVNode)("取 消"),N=(0,l.createTextVNode)("确 定");function b(e,t,a,o,b,y){const v=(0,l.resolveComponent)("el-breadcrumb-item"),k=(0,l.resolveComponent)("el-breadcrumb"),D=(0,l.resolveComponent)("el-alert"),$=(0,l.resolveComponent)("el-cascader"),T=(0,l.resolveComponent)("el-col"),z=(0,l.resolveComponent)("el-row"),B=(0,l.resolveComponent)("el-button"),F=(0,l.resolveComponent)("el-tag"),I=(0,l.resolveComponent)("el-input"),L=(0,l.resolveComponent)("el-table-column"),E=(0,l.resolveComponent)("el-table"),K=(0,l.resolveComponent)("el-tab-pane"),P=(0,l.resolveComponent)("el-tabs"),R=(0,l.resolveComponent)("el-card"),U=(0,l.resolveComponent)("el-form-item"),S=(0,l.resolveComponent)("el-form"),q=(0,l.resolveComponent)("el-dialog");return(0,l.openBlock)(),(0,l.createElementBlock)("div",null,[(0,l.createVNode)(k,{"separator-class":"el-icon-arrow-right"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(v,{to:{path:"/home"}},{default:(0,l.withCtx)((()=>[i])),_:1}),(0,l.createVNode)(v,null,{default:(0,l.withCtx)((()=>[r])),_:1}),(0,l.createVNode)(v,null,{default:(0,l.withCtx)((()=>[s])),_:1})])),_:1}),(0,l.createVNode)(R,null,{default:(0,l.withCtx)((()=>[(0,l.createVNode)(D,{"show-icon":"",title:"注意：只允许为第三级分类设置相关参数！",type:"warning",closable:!1}),(0,l.createVNode)(z,{class:"cat_opt"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(T,null,{default:(0,l.withCtx)((()=>[d,(0,l.createVNode)($,{modelValue:b.selectedCateKeys,"onUpdate:modelValue":t[0]||(t[0]=e=>b.selectedCateKeys=e),options:b.cateList,props:b.cateProps,onChange:y.handleChange,class:"cascadercss"},null,8,["modelValue","options","props","onChange"])])),_:1})])),_:1}),(0,l.createVNode)(P,{modelValue:b.activeName,"onUpdate:modelValue":t[3]||(t[3]=e=>b.activeName=e),class:"demo-tabs",onTabClick:y.handleTabClick},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(K,{label:"动态参数",name:"many"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(B,{type:"primary",size:"mini",disabled:y.isBtnDisabled,onClick:t[1]||(t[1]=e=>b.addDialogVisible=!0)},{default:(0,l.withCtx)((()=>[n])),_:1},8,["disabled"]),(0,l.createVNode)(E,{data:b.manyTableData,border:"",stripe:""},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(L,{type:"expand"},{default:(0,l.withCtx)((e=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.row.attr_vals,((t,a)=>((0,l.openBlock)(),(0,l.createBlock)(F,{key:a,closable:"",onClose:t=>y.handleClose(a,e.row)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(t),1)])),_:2},1032,["onClose"])))),128)),e.row.inputVisible?((0,l.openBlock)(),(0,l.createBlock)(I,{key:0,ref:"InputRef",modelValue:e.row.inputValue,"onUpdate:modelValue":t=>e.row.inputValue=t,class:"input-new-tag",size:"small",onKeyup:(0,l.withKeys)((t=>y.handleInputConfirm(e.row)),["enter"]),onBlur:t=>y.handleInputConfirm(e.row)},null,8,["modelValue","onUpdate:modelValue","onKeyup","onBlur"])):((0,l.openBlock)(),(0,l.createBlock)(B,{key:1,class:"button-new-tag",size:"small",onClick:t=>y.showInput(e.row)},{default:(0,l.withCtx)((()=>[c])),_:2},1032,["onClick"]))])),_:1}),(0,l.createVNode)(L,{type:"index"}),(0,l.createVNode)(L,{label:"参数名称",prop:"attr_name"}),(0,l.createVNode)(L,{label:"操作"},{default:(0,l.withCtx)((e=>[(0,l.createVNode)(B,{type:"primary",icon:b.Edit,size:"mini",onClick:t=>y.showEditDialog(e.row.attr_id)},{default:(0,l.withCtx)((()=>[u])),_:2},1032,["icon","onClick"]),(0,l.createVNode)(B,{type:"danger",icon:b.Delete,size:"mini",onClick:t=>y.removeParams(e.row.attr_id)},{default:(0,l.withCtx)((()=>[m])),_:2},1032,["icon","onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,l.createVNode)(K,{label:"静态属性",name:"only"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(B,{type:"primary",size:"mini",disabled:y.isBtnDisabled,onClick:t[2]||(t[2]=e=>b.addDialogVisible=!0)},{default:(0,l.withCtx)((()=>[h])),_:1},8,["disabled"]),(0,l.createVNode)(E,{data:b.onlyTableData,border:"",stripe:""},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(L,{type:"expand"},{default:(0,l.withCtx)((e=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.row.attr_vals,((t,a)=>((0,l.openBlock)(),(0,l.createBlock)(F,{key:a,closable:"",onClose:t=>y.handleClose(a,e.row)},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)((0,l.toDisplayString)(t),1)])),_:2},1032,["onClose"])))),128)),e.row.inputVisible?((0,l.openBlock)(),(0,l.createBlock)(I,{key:0,ref:"InputRef",modelValue:e.row.inputValue,"onUpdate:modelValue":t=>e.row.inputValue=t,class:"input-new-tag",size:"small",onKeyup:(0,l.withKeys)((t=>y.handleInputConfirm(e.row)),["enter"]),onBlur:t=>y.handleInputConfirm(e.row)},null,8,["modelValue","onUpdate:modelValue","onKeyup","onBlur"])):((0,l.openBlock)(),(0,l.createBlock)(B,{key:1,class:"button-new-tag",size:"small",onClick:t=>y.showInput(e.row)},{default:(0,l.withCtx)((()=>[p])),_:2},1032,["onClick"]))])),_:1}),(0,l.createVNode)(L,{type:"index"}),(0,l.createVNode)(L,{label:"属性名称",prop:"attr_name"}),(0,l.createVNode)(L,{label:"操作"},{default:(0,l.withCtx)((e=>[(0,l.createVNode)(B,{type:"primary",icon:b.Edit,size:"mini",onClick:t=>y.showEditDialog(e.row.attr_id)},{default:(0,l.withCtx)((()=>[C])),_:2},1032,["icon","onClick"]),(0,l.createVNode)(B,{type:"danger",icon:b.Delete,size:"mini",onClick:t=>y.removeParams(e.row.attr_id)},{default:(0,l.withCtx)((()=>[V])),_:2},1032,["icon","onClick"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1}),(0,l.createVNode)(q,{modelValue:b.addDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>b.addDialogVisible=e),title:"添加"+y.titleText,width:"50%",onClose:y.addDialogClosed},{footer:(0,l.withCtx)((()=>[(0,l.createElementVNode)("span",g,[(0,l.createVNode)(B,{onClick:t[5]||(t[5]=t=>e.dialogVisible=!1)},{default:(0,l.withCtx)((()=>[f])),_:1}),(0,l.createVNode)(B,{type:"primary",onClick:y.addParams},{default:(0,l.withCtx)((()=>[w])),_:1},8,["onClick"])])])),default:(0,l.withCtx)((()=>[(0,l.createVNode)(S,{ref:"addFormRef",model:b.addForm,rules:b.addFormRules,"label-width":"120px",size:e.formSize},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(U,{label:y.titleText,prop:"attr_name"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(I,{modelValue:b.addForm.attr_name,"onUpdate:modelValue":t[4]||(t[4]=e=>b.addForm.attr_name=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules","size"])])),_:1},8,["modelValue","title","onClose"]),(0,l.createVNode)(q,{modelValue:b.editDialogVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>b.editDialogVisible=e),title:"修改"+y.titleText,width:"50%",onClose:y.editDialogClosed},{footer:(0,l.withCtx)((()=>[(0,l.createElementVNode)("span",_,[(0,l.createVNode)(B,{onClick:t[8]||(t[8]=e=>b.editDialogVisible=!1)},{default:(0,l.withCtx)((()=>[x])),_:1}),(0,l.createVNode)(B,{type:"primary",onClick:y.editParams},{default:(0,l.withCtx)((()=>[N])),_:1},8,["onClick"])])])),default:(0,l.withCtx)((()=>[(0,l.createVNode)(S,{ref:"editFormRef",model:b.editForm,rules:b.editFormRules,"label-width":"120px",size:e.formSize},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(U,{label:y.titleText,prop:"attr_name"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(I,{modelValue:b.editForm.attr_name,"onUpdate:modelValue":t[7]||(t[7]=e=>b.editForm.attr_name=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules","size"])])),_:1},8,["modelValue","title","onClose"])])}var y=a(4876),v=a(547),k={data(){return{Edit:y.Z,Delete:v.Z,cateList:[],cateProps:{value:"cat_id",label:"cat_name",children:"children"},selectedCateKeys:[],activeName:"many",manyTableData:[],onlyTableData:[],addDialogVisible:!1,addForm:{attr_name:""},addFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},editDialogVisible:!1,editForm:{},editFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]}}},created(){this.getCateList()},methods:{async getCateList(){const{data:e}=await this.$http.get("categories");if(200!==e.meta.status)return this.$message.error("获取商品分类失败!");this.cateList=e.data},handleChange(){this.getParamsData()},handleTabClick(){this.getParamsData()},async getParamsData(){if(3!==this.selectedCateKeys.length)return this.selectedCateKeys=[],this.manyTableData=[],void(this.onlyTableData=[]);const{data:e}=await this.$http.get(`categories/${this.cateId}/attributes`,{params:{sel:this.activeName}});if(200!==e.meta.status)return this.$message.error("获取参数列表失败!");e.data.forEach((e=>{e.attr_vals=e.attr_vals?e.attr_vals.split(","):[],e.inputVisible=!1,e.inputValue=""})),"many"===this.activeName?this.manyTableData=e.data:this.onlyTableData=e.data},addDialogClosed(){this.$refs.addFormRef.resetFields()},editDialogClosed(){this.$refs.editFormRef.resetFields()},addParams(){this.$refs.addFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.post(`categories/${this.cateId}/attributes`,{attr_name:this.addForm.attr_name,attr_sel:this.activeName});if(201!==t.meta.status)return this.$message.error("添加参数失败!");this.$message.success("添加参数成功!"),this.addDialogVisible=!1,this.getParamsData()}))},async showEditDialog(e){const{data:t}=await this.$http.get(`categories/${this.cateId}/attributes/${e}`,{params:{attr_sel:this.activeName}});if(200!==t.meta.status)return this.$message.error("获取参数信息失败!");this.editForm=t.data,this.editDialogVisible=!0},editParams(){this.$refs.editFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.put(`categories/${this.cateId}/attributes/${this.editForm.attr_id}`,{attr_name:this.editForm.attr_name,attr_sel:this.activeName});if(200!==t.meta.status)return this.$message.error("修改参数信息失败!");this.$message.success("修改参数信息成功!"),this.getParamsData(),this.editDialogVisible=!1}))},async removeParams(e){const t=await this.$confirm("此操作将永久删除该分类, 是否继续?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.info("已取消删除操作!");const{data:a}=await this.$http.delete(`categories/${this.cateId}/attributes/${e}`);if(200!==a.meta.status)return this.$message.error("删除参数失败!");this.$message.success("删除参数成功"),this.getParamsData()},async handleInputConfirm(e){if(0===e.inputValue.trim().length)return e.inputValue="",void(e.inputVisible=!1);e.attr_vals.push(e.inputValue.trim()),e.inputValue="",e.inputVisible=!1,this.saveAttrVals(e)},showInput(e){e.inputVisible=!0,this.$nextTick((e=>{this.$refs.InputRef.$refs.input.focus()}))},async saveAttrVals(e){const{data:t}=await this.$http.put(`categories/${this.cateId}/attributes/${e.attr_id}`,{attr_name:e.attr_name,attr_sel:e.attr_sel,attr_vals:e.attr_vals.join(" ")});if(200!==t.meta.status)return this.$message.error("修改参数项失败");this.$message.success("修改参数项成功")},handleClose(e,t){t.attr_vals.splice(e,1),this.saveAttrVals(t)}},computed:{isBtnDisabled(){return 3!==this.selectedCateKeys.length},cateId(){return 3===this.selectedCateKeys.length?this.selectedCateKeys[2]:null},titleText(){return"many"===this.activeName?"动态属性":"静态属性"}}},D=a(89);const $=(0,D.Z)(k,[["render",b],["__scopeId","data-v-bcad6264"]]);var T=$},4876:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(311),o=a(6854);const i=(0,l.defineComponent)({name:"Edit"}),r={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},s=(0,l.createElementVNode)("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),d=(0,l.createElementVNode)("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1),n=[s,d];function c(e,t,a,o,i,s){return(0,l.openBlock)(),(0,l.createElementBlock)("svg",r,n)}var u=(0,o.Z)(i,[["render",c]])}}]);
//# sourceMappingURL=Cate_Params.55e8500c.js.map